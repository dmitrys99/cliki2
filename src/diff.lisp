(in-package #:cliki2)
(in-readtable cliki2)

(defclass wiki-diff (diff:diff) ()
  (:default-initargs
   :window-class 'wiki-diff-window))

(defclass wiki-diff-window (diff:diff-window) ())

(defun choose-chunks (chunks a b c)
  (loop for chunk in chunks appending
       (let ((kind (diff:chunk-kind chunk))
             (lines (diff:chunk-lines chunk)))
         (cond ((or (eq kind :common) (eq kind a)) lines)
               ((eq kind b) (list (format nil "窿扉铄螬┅è羼腴钿悌磲脲扉篝戾铉翳扉铄螬┅┅┅ㄤ彐躅泔眇狎瀛篝蜷铉矧殓轭犰盹溟骈邃灬忮祗è篝虿狎篝颟磲箝眇戾鲥泗矧＇汨狎泔溴篝颟黩篝秕篝狎孱洎祜镳骘骝镯篝狎忮祜孱骘汨ㄣ栳篝椹滹ㄩㄣ栳蚪汨＼五黛轭濠黩轸瀛扉铄⒓怛劲秕舂黩轸瀛汨狎汨秕舂┅ㄦ眙蝈玳镱篝镦骟弭骢戾铉翳骢瞟鏖翳秕麴豸麸篝蜷铉秕舂祜镳骘蝈轭蝈玳镱骘盹溟骈邃豉疱蝈т殒婧盹溟骈邃溟骀蝈玳镱骘篝狎ㄦ躅汜祆镦骟弭骢蝈绌骘孱ǐ篝狎ㄦ躅汜祆戾铉翳骢蝈绌滹痱镧麒孱盹溟骈邃痱轭⒓箴犷劲秕舂黩篝秕篝狎孱洎麒孱盹溟骈邃痱轭⒓箴犷劲秕舂┅┅┅戾è蜥麂殒ㄤ殒婧泔眇豸瀛蜥鳝溟骀篝虿狎矧殓轭犰篝虿狎盹溟骈邃┅┅鲠祯弩ㄦ眙蜥麂殒矧殓轭犰＇溟骀猴蜷玳钺飙篝狎＇溟骀猴蜷玳钺飙戾铉翳ㄦ眙蜥麂殒盹溟骈邃＇溟骀喉镤殒殄洵篝狎＇溟骀喉镤殒殄洵戾铉翳┅┅ㄤ彐礤翳镤溟骀候孱溴颦溟骀鏖钿秣衡彐矧è鏖钿秣鏖腴溟骀鏖钿秣梏盱篝蝈犴Ｈ奂趄剪炯翡沆狍蠼溟骀扉铄铛礅弪⒕涕铄ㄤ殒婧矧殓轭犰篝狎舡扉铄鏖钿秣杭翡剪炯翡沆狍蠼溟骀扉铄铛礅弪⒕涕铄ㄤ殒婧盹溟骈邃篝狎舡扉铄鏖钿秣杭翡集趄据ㄤ彐礤翳镤溟骀候孱溴颦溟骀鏖钿秣è鏖钿秣鏖腴溟骀鏖钿秣梏盱篝蝈犴灬忮祗è弩汜疱麒孱ㄥ筱狃瀛骘颦梏盱┅翡扉铄溽箬沆狍螬ㄩ扉铄Ｈ奂翡沆狍蠼溟骀磲螂弪⒕溽箬集翡炯翡沆狍蠼沆狍簖⒕扉铄集翡据Ｈ奂翡沆狍蠼溟骀磲螂弪炯翡据┅ㄤ殒姝扉铄矧殓轭犰盹溟骈邃翡矧殓轭犰溟骀溴戾翦扉铄翡盹溟骈邃溟骀徜潇轭澧┅祜镳骘矧殓轭犰轭ㄣ栾矬瀛汨躅塍ㄤ殒婧鏖钿秣汨躅塍鏖钿秣轰屐弭候屦灬沐恒蝈狒濠骘盹溟骈邃轭ㄣ栾矬瀛汨躅塍ㄤ殒婧鏖钿秣汨躅塍鏖钿秣恒蝈狒洪铙弪轰屐弭濠滹戾è矧殓轭犰ㄥ筱狃矧殓轭犰┅盹溟骈邃ㄥ筱狃盹溟骈邃┅Ｈ奂趄据ㄩㄡ钿矧殓轭犰盹溟骈邃ㄩ篝蜷铉矧殓轭犰盹溟骈邃Ｈ奂翡沆狍蠼溟骀磲螂弪剪沆狍蠼溟骀泔铘屮簪兢矧殓轭犰集翡剪沆狍蠼溟骀磲螂弪剪沆狍蠼溟骀泔铘屮簪兢矧殓轭犰集翡据眭祠轲戾鲠祯瀛汜祆＇溟骀扉铄ㄣ镯疳蝈篝蜷铉矧殓轭犰盹溟骈邃┅ㄤ殒姝扉铄矧殓轭犰盹溟骈邃┅Ｈ奂趄据┅┅